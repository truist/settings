#!/usr/bin/env bash
set -e
set -u
set -o pipefail

# from https://codeberg.org/EvanHahn/dotfiles/src/commit/843b9ee13d949d346a4a73ccee2a99351aed285b/home/bin/bin/waitfor

if [ $# -ne 1 ]; then
	echo "args: <pid>" >&2
	exit 1
fi
pid="$1"

if hash systemd-inhibit 2>/dev/null; then
	systemd-inhibit \
		--who="$0" \
		--why="Awaiting PID $pid" \
fi

tail --pid="$pid" -f /dev/null
